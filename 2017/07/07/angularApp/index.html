<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="南京信息工程大学 擅长前端，热爱研究移动端开发与前端性能"><title>angular1开发webApp | 持续更新 | 超元气Zeroの札记</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">angular1开发webApp | 持续更新</h1><a id="logo" href="/.">超元气Zeroの札记</a><p class="description">一个集美貌与才华于一身的程序媛</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">angular1开发webApp | 持续更新</h1><div class="post-meta">Jul 7, 2017</div><div class="post-content"><p> 最近用angular做了一些webApp,也总结了不少的固定套路。现在将固定套路整理如下,主要分为css,js,插件三部分。</p>
<a id="more"></a> 
<h2 id="js部分"><a href="#js部分" class="headerlink" title="js部分"></a>js部分</h2><h3 id="利用-rootscope打造轻量级数据管理"><a href="#利用-rootscope打造轻量级数据管理" class="headerlink" title="利用$rootscope打造轻量级数据管理"></a>利用<code>$rootscope</code>打造轻量级数据管理</h3><p> 建议将常量定义在 main.js 里的 <code>$rootscope</code>里,必要时结合<code>$localstorage</code> 使用。好处:一次定义,多次复用，实时更新</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> u = navigator.userAgent;</span><br><span class="line">$scope.app = &#123;</span><br><span class="line">    errorId:<span class="literal">null</span>, <span class="comment">//错误码</span></span><br><span class="line">    enableToAddEquip: <span class="literal">false</span>, <span class="comment">//是否可以添加设备</span></span><br><span class="line">    environment: <span class="regexp">/localhost/</span>.test(<span class="built_in">window</span>.location.href) ? <span class="string">'dev'</span> : <span class="string">'product'</span>, <span class="comment">//开发or生产环境</span></span><br><span class="line">    logOut: <span class="literal">false</span>, <span class="comment">//是否退出</span></span><br><span class="line">    isAndroid: u.indexOf(<span class="string">'Android'</span>) &gt; <span class="number">-1</span> || u.indexOf(<span class="string">'Adr'</span>) &gt; <span class="number">-1</span> || u.indexOf(<span class="string">'Linux'</span>) &gt; <span class="number">-1</span>, <span class="comment">//判断安卓或者苹果</span></span><br><span class="line">    isIphone: u.indexOf(<span class="string">'iPhone'</span>) &gt; <span class="number">-1</span>,</span><br><span class="line">    version: <span class="number">1.0</span>,</span><br><span class="line">    weatherKey: <span class="number">5</span>, <span class="comment">//天气状态码</span></span><br><span class="line">    roleName: $localStorage.app ? $localStorage.app.roleName : <span class="string">''</span>,  <span class="comment">// 不在提示绑定</span></span><br><span class="line">    email: $localStorage.app ? $localStorage.app.email : <span class="string">''</span>,  <span class="comment">// 终端用户 &amp; 安装商email</span></span><br><span class="line">    userName: $localStorage.app ? $localStorage.app.userName : <span class="string">''</span>,</span><br><span class="line">    password: $localStorage.app ? $localStorage.password : <span class="string">''</span>,</span><br><span class="line">    installerSn: $localStorage.app ? $localStorage.app.installerSn : <span class="literal">null</span>,</span><br><span class="line">    operationSn: $localStorage.app ? $localStorage.app.operationSn : <span class="literal">null</span>,</span><br><span class="line">    userSn: $localStorage.app ? $localStorage.app.userSn : <span class="literal">null</span>,</span><br><span class="line">    equipSn: $localStorage.app ? $localStorage.app.equipSn : <span class="literal">null</span>,</span><br><span class="line">    stationId: $localStorage.app ? $localStorage.app.stationId : <span class="literal">null</span>,</span><br><span class="line">    authError: <span class="literal">null</span>,</span><br><span class="line">    successReturnCode: <span class="string">'0000'</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="尝试其他方法和后台做数据交互"><a href="#尝试其他方法和后台做数据交互" class="headerlink" title="尝试其他方法和后台做数据交互"></a>尝试其他方法和后台做数据交互</h3><p>这个问题是我在做第一个app中遇到的，如果不用ajax，前端有什么其他方法和后台做数据交互？<br>我的partner提出了一个可行的方法。大致思路是后端拦截前端所有页面间的跳转，前端不主动跳转页面。所有的跳转由后台协助完成。在android系统里前、后端约定好一个函数名称，如果前端调用该函数，函数的参数即是需要交互的数据。后端通过参数获取前端上传的数据。并将前端需要的结果以字符串的形式返回（可以是url，也可以是解析后的JSON字符串）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> url = <span class="built_in">window</span>.jsOjb.login(<span class="string">'demo'</span>,<span class="string">'123456'</span>) <span class="comment">// demo 用户名 123456 密码 函数的返回值即成功登陆之后的url链接</span></span><br><span class="line">   <span class="keyword">if</span>(url)&#123;</span><br><span class="line">   	<span class="built_in">window</span>.location.href = url;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>在ios系统中稍微不一样</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> url = <span class="built_in">window</span>.location.href = <span class="string">',login,name,123456'</span>;</span><br></pre></td></tr></table></figure>
<h2 id="CSS部分"><a href="#CSS部分" class="headerlink" title="CSS部分"></a>CSS部分</h2><h3 id="rem-解决页面适配问题"><a href="#rem-解决页面适配问题" class="headerlink" title="rem 解决页面适配问题"></a>rem 解决页面适配问题</h3><p>rem 的原理就是根据html的font-size 大小，做到页面的元素宽/高度自适应。而用rem遇到的问题是：如果用<strong>js动态</strong>设置页面的font-size，页面会有一瞬间的先缩小后放大过程。我的解决方案是利用css3的媒体查询直接改变html的font-size大小。此段代码可以写在页面重置css里</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span>&#123;<span class="attribute">font-size</span>:<span class="number">32px</span> <span class="meta">!important</span>;&#125;</span><br><span class="line">@<span class="keyword">media</span> screen and (min-width:<span class="number">350px</span>) and (max-width:<span class="number">374px</span>)&#123;<span class="selector-tag">html</span>&#123;<span class="attribute">font-size</span>:<span class="number">35px</span> <span class="meta">!important</span>;&#125;&#125;</span><br><span class="line">@<span class="keyword">media</span> screen and (min-width:<span class="number">375px</span>) and (max-width:<span class="number">413px</span>)&#123;<span class="selector-tag">html</span>&#123;<span class="attribute">font-size</span>:<span class="number">37px</span><span class="meta">!important</span>;&#125;&#125;</span><br><span class="line">@<span class="keyword">media</span> screen and (min-width:<span class="number">414px</span>) and (max-width:<span class="number">639px</span>)&#123;<span class="selector-tag">html</span>&#123;<span class="attribute">font-size</span>:<span class="number">41px</span><span class="meta">!important</span>;&#125;&#125;</span><br><span class="line">@<span class="keyword">media</span> screen and (min-width:<span class="number">640px</span>) and (max-width:<span class="number">719px</span>)&#123;<span class="selector-tag">html</span>&#123;<span class="attribute">font-size</span>:<span class="number">64px</span><span class="meta">!important</span>;&#125;&#125;</span><br><span class="line">@<span class="keyword">media</span> screen and (min-width:<span class="number">720px</span>) and (max-width:<span class="number">749px</span>)&#123;<span class="selector-tag">html</span>&#123;<span class="attribute">font-size</span>:<span class="number">72px</span><span class="meta">!important</span>;&#125;&#125;</span><br><span class="line">@<span class="keyword">media</span> screen and (min-width:<span class="number">750px</span>) and (max-width:<span class="number">799px</span>)&#123;<span class="selector-tag">html</span>&#123;<span class="attribute">font-size</span>:<span class="number">75px</span><span class="meta">!important</span>;&#125;&#125;</span><br><span class="line">@<span class="keyword">media</span> screen and (min-width:<span class="number">800px</span>)&#123;<span class="selector-tag">html</span>&#123;<span class="attribute">font-size</span>:<span class="number">80px</span>&#125;&#125;</span><br></pre></td></tr></table></figure>
<p> html 部分的meta标签</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"</span> /&gt;</span></span><br><span class="line"> <span class="comment">&lt;!-- ios自动识别数字为电话号码导致页面错位 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"format-detection"</span> <span class="attr">content</span>=<span class="string">"telephone=no"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="input-typr-radio-表现怪异"><a href="#input-typr-radio-表现怪异" class="headerlink" title="input[typr=radio]表现怪异"></a>input[typr=radio]表现怪异</h3><p>由于重置了一些css样式导致input输入框的样式变成可以复制粘贴，而不是呈点击状态<br>故将css代码贴出来，防止再入坑</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 此代码会导致input单选框怪异模式*/</span></span><br><span class="line"> <span class="selector-tag">input</span><span class="selector-pseudo">:-webkit-user-modify</span><span class="selector-pseudo">:read-write-plaintext-only</span>;</span><br></pre></td></tr></table></figure>
<h2 id="Sticky-footer-布局"><a href="#Sticky-footer-布局" class="headerlink" title="Sticky footer 布局"></a>Sticky footer 布局</h2><p>App常见布局<a href="https://liuchao0704.github.io/2018/01/06/stickyfooter/">点击查看</a></p>
<h2 id="App单页面切换效果"><a href="#App单页面切换效果" class="headerlink" title="App单页面切换效果"></a>App单页面切换效果</h2><p>SPA加上页面切换效果堪比原生App<a href="https://github.com/liuchao0704/angularWebApp.git" target="_blank" rel="noopener">点击查看</a></p>
<h2 id="上下左右居中解决方案"><a href="#上下左右居中解决方案" class="headerlink" title="上下左右居中解决方案"></a>上下左右居中解决方案</h2><ul>
<li>子级宽高固定（多见于loading实现）</li>
<li>子级宽高不固定（多见于图片）</li>
<li>弹框居中解决方案（css世界给出的方案）</li>
</ul>
<p><img src="https://liuchao-0704-1258039511.cos.ap-chengdu.myqcloud.com/css/cssworld/loading1.jpg" alt=""></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.loading-wrap</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>:relative;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">background</span>:<span class="number">#f0f0f0</span>;</span><br><span class="line">    <span class="attribute">margin</span>:<span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.loading-content</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>:absolute;</span><br><span class="line">    <span class="attribute">text-align</span>:center;</span><br><span class="line">    <span class="attribute">left</span>:<span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>:<span class="number">0</span>;</span><br><span class="line">    <span class="attribute">top</span>:<span class="number">0</span>;</span><br><span class="line">    <span class="attribute">bottom</span>:<span class="number">0</span>;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>:<span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">margin</span>:auto;</span><br><span class="line">&#125;</span><br><span class="line">&lt;!<span class="selector-tag">--loading</span>居中<span class="selector-tag">--</span>&gt;</span><br><span class="line">&lt;div class="loading-wrap"&gt;</span><br><span class="line">    &lt;div class="loading-content"&gt;</span><br><span class="line">    	<span class="selector-tag">loading</span> ....</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p><img src="https://liuchao-0704-1258039511.cos.ap-chengdu.myqcloud.com/css/cssworld/imgvertical.jpg" alt=""></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"> <span class="selector-class">.img-wrap</span> &#123;</span><br><span class="line">     <span class="attribute">position</span>:relative;</span><br><span class="line">     <span class="attribute">width</span>:<span class="number">300px</span>;</span><br><span class="line">     <span class="attribute">height</span>:<span class="number">300px</span>;</span><br><span class="line">     <span class="attribute">background</span>:<span class="number">#f0f0f0</span>;</span><br><span class="line">     <span class="attribute">text-align</span>:center;</span><br><span class="line">     <span class="attribute">font-size</span>:<span class="number">0</span>;</span><br><span class="line">     <span class="attribute">line-height</span>:<span class="number">300px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.img-wrap</span> &gt; <span class="selector-class">.img</span> &#123;</span><br><span class="line">    <span class="attribute">max-height</span>:<span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">max-width</span>:<span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">vertical-align</span>:middle;</span><br><span class="line">&#125;</span><br><span class="line">  &lt;!<span class="selector-tag">--</span>图片宽高不确定居中<span class="selector-tag">--</span>&gt;</span><br><span class="line">  &lt;div class="img-wrap"&gt;</span><br><span class="line">      &lt;img class="img" src="../timg.jpg" alt=""&gt;</span><br><span class="line">  &lt;/div&gt;</span><br></pre></td></tr></table></figure>
</div><div class="tags"><a href="/tags/angular/">angular</a><a href="/tags/webApp/">webApp</a></div><div class="post-nav"><a class="pre" href="/2018/01/06/stickyfooter/">Sticky footer 布局</a><a class="next" href="/2017/05/17/broadcast/">Angular $on、$emit、$broadcast 事件传播时机分析</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/生活/" style="font-size: 15px;">生活</a> <a href="/tags/angular/" style="font-size: 15px;">angular</a> <a href="/tags/css/" style="font-size: 15px;">css</a> <a href="/tags/webApp/" style="font-size: 15px;">webApp</a> <a href="/tags/js/" style="font-size: 15px;">js</a> <a href="/tags/date/" style="font-size: 15px;">date</a> <a href="/tags/form/" style="font-size: 15px;">form</a> <a href="/tags/gulp/" style="font-size: 15px;">gulp</a> <a href="/tags/cookie/" style="font-size: 15px;">cookie</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/array/" style="font-size: 15px;">array</a> <a href="/tags/checkbox/" style="font-size: 15px;">checkbox</a> <a href="/tags/对象/" style="font-size: 15px;">对象</a> <a href="/tags/reg/" style="font-size: 15px;">reg</a> <a href="/tags/简历/" style="font-size: 15px;">简历</a> <a href="/tags/游泳/" style="font-size: 15px;">游泳</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/11/15/cssworld04/">6、流的破坏与保护</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/07/you-dont-know-js-first1/">你不知道的JS(上)作用域</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/20/you-dont-know-js-middle3/">你不知道的JS(中)语法</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/15/you-dont-know-js-middle1/">你不知道的JS(中)类型</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/15/you-dont-know-js-middle2/">你不知道的JS(中)强制类型转换</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/07/cssworld03/">5、内联元素与流</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/06/cssworld02/">4、盒尺寸四大家族</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/06/cssworld01/">3、流、元素、基本尺寸</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/16/css3/">css总结 | 读css世界笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/09/swim/">游泳小记</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">超元气Zeroの札记.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>